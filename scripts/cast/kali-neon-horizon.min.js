function _0x2501(_0x1a7bb9,_0x3f48c7){const _0x3f2c34=_0x3f2c();return _0x2501=function(_0x25011f,_0x577496){_0x25011f=_0x25011f-0x1e7;let _0x4b8e85=_0x3f2c34[_0x25011f];return _0x4b8e85;},_0x2501(_0x1a7bb9,_0x3f48c7);}const _0x3bb392=_0x2501;(function(_0x2c1f7f,_0x3c5bb7){const _0x1be144=_0x2501,_0x2f60c9=_0x2c1f7f();while(!![]){try{const _0x29ba8f=-parseInt(_0x1be144(0x246))/0x1+-parseInt(_0x1be144(0x22f))/0x2*(-parseInt(_0x1be144(0x1ff))/0x3)+-parseInt(_0x1be144(0x260))/0x4+parseInt(_0x1be144(0x1fd))/0x5+parseInt(_0x1be144(0x200))/0x6*(-parseInt(_0x1be144(0x263))/0x7)+-parseInt(_0x1be144(0x1f9))/0x8+parseInt(_0x1be144(0x20f))/0x9;if(_0x29ba8f===_0x3c5bb7)break;else _0x2f60c9['push'](_0x2f60c9['shift']());}catch(_0x458da8){_0x2f60c9['push'](_0x2f60c9['shift']());}}}(_0x3f2c,0xdb2c0));import{W as _0x1e4805,V as _0x4662ef,r as _0x28c98e}from'./receiver.min.js';function _0x3f2c(){const _0x3d3e7b=['Failed\x20to\x20allocate\x20fullscreen\x20buffer','isBeat','map','init','_updateResolutionUniform','enable','isBeatSpike','uTime','_lastRenderAt','undefined','flux','_loudnessDistortionPhase','uColorDrift','_loudnessDistortion','uFlux','lowMidEnergy','getUniformLocation','canvas','subBassEnergy','2FXkZsD','reset','viewport','_timelineDistortion','createBuffer','centroid','uniform2f','_uniforms','vertexAttribPointer','TECH','ENERGY','_lastLoudnessSample','FLOAT','now','onRender','trebleEnergy','enableVertexAttribArray','_phraseClock','uEnergy','_state','getAttribLocation','highEnergy','_fullscreenBuffer','1353801sKwsWS','uBeatPulse','width','#ifdef\x20GL_FRAGMENT_PRECISION_HIGH\x0aprecision\x20highp\x20float;\x0a#else\x0aprecision\x20mediump\x20float;\x0a#endif\x0a\x0aattribute\x20vec2\x20aPosition;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20gl_Position\x20=\x20vec4(aPosition,\x200.0,\x201.0);\x0a}\x0a','#ifdef\x20GL_ES\x0a#ifdef\x20GL_FRAGMENT_PRECISION_HIGH\x0aprecision\x20highp\x20float;\x0a#else\x0aprecision\x20mediump\x20float;\x0a#endif\x0a\x0aprecision\x20highp\x20int;\x0a#endif\x0a\x0a#ifdef\x20GL_OES_STANDARD_DERIVATIVES\x0a#extension\x20GL_OES_standard_derivatives\x20:\x20enable\x0a#define\x20HAS_DERIVATIVES\x201\x0a#elif\x20defined(GL_OES_standard_derivatives)\x0a#extension\x20GL_OES_standard_derivatives\x20:\x20enable\x0a#define\x20HAS_DERIVATIVES\x201\x0a#else\x0a#define\x20HAS_DERIVATIVES\x200\x0a#endif\x0a\x0auniform\x20float\x20uTime;\x0auniform\x20vec2\x20uResolution;\x0auniform\x20float\x20uEnergy;\x0auniform\x20float\x20uBass;\x0auniform\x20float\x20uTreble;\x0auniform\x20float\x20uFlux;\x0auniform\x20float\x20uStereo;\x0auniform\x20float\x20uPhrase;\x0auniform\x20float\x20uDrop;\x0auniform\x20float\x20uColorDrift;\x0auniform\x20float\x20uBeatPulse;\x0auniform\x20float\x20uIntroCollapsePhase;\x0auniform\x20float\x20uOutroCollapsePhase;\x0auniform\x20vec4\x20uLoudnessDistortion;\x0auniform\x20float\x20uLoudnessDistortionDirection;\x0a\x0a#define\x20_t\x20uTime\x0a#define\x20_res\x20uResolution\x0a#define\x20TIME\x20\x20\x20\x20\x20\x20\x20\x20(_t\x20+\x20uFlux\x20*\x200.25\x20+\x20uDrop\x20*\x200.35)\x0a#define\x20RESOLUTION\x20\x20_res\x0a#define\x20PI\x20\x20\x20\x20\x20\x20\x20\x20\x20\x203.141592654\x0a#define\x20PI_2\x20\x20\x20\x20\x20\x20\x20\x20(0.5*PI)\x0a#define\x20TAU\x20\x20\x20\x20\x20\x20\x20\x20\x20(2.0*PI)\x0a#define\x20SCA(a)\x20\x20\x20\x20\x20\x20vec2(sin(a),\x20cos(a))\x0a#define\x20ROT(a)\x20\x20\x20\x20\x20\x20mat2(cos(a),\x20sin(a),\x20-sin(a),\x20cos(a))\x0a\x0a//\x20CC0:\x20For\x20the\x20neon\x20style\x20enjoyers\x0a//\x20Ported\x20+\x20audio-reactive\x20adaptation\x20for\x20vvavy.io\x20by\x20Codex\x0a\x0a#define\x20HSV2RGB(c)\x20\x20(c.z\x20*\x20mix(hsv2rgb_K.xxx,\x20clamp(abs(fract(c.xxx\x20+\x20hsv2rgb_K.xyz)\x20*\x206.0\x20-\x20hsv2rgb_K.www)\x20-\x20hsv2rgb_K.xxx,\x200.0,\x201.0),\x20c.y))\x0a\x0aconst\x20vec4\x20hsv2rgb_K\x20=\x20vec4(1.0,\x202.0\x20/\x203.0,\x201.0\x20/\x203.0,\x203.0);\x0a\x0avec3\x20hsv2rgb(vec3\x20c)\x20{\x0a\x20\x20vec3\x20p\x20=\x20abs(fract(c.xxx\x20+\x20hsv2rgb_K.xyz)\x20*\x206.0\x20-\x20hsv2rgb_K.www);\x0a\x20\x20return\x20c.z\x20*\x20mix(hsv2rgb_K.xxx,\x20clamp(p\x20-\x20hsv2rgb_K.xxx,\x200.0,\x201.0),\x20c.y);\x0a}\x0a\x0avec3\x20rgb2hsv(vec3\x20c)\x20{\x0a\x20\x20const\x20vec4\x20K\x20=\x20vec4(0.0,\x20-1.0\x20/\x203.0,\x202.0\x20/\x203.0,\x20-1.0);\x0a\x20\x20vec4\x20p\x20=\x20mix(vec4(c.bg,\x20K.wz),\x20vec4(c.gb,\x20K.xy),\x20step(c.b,\x20c.g));\x0a\x20\x20vec4\x20q\x20=\x20mix(vec4(p.xyw,\x20c.r),\x20vec4(c.r,\x20p.yzx),\x20step(p.x,\x20c.r));\x0a\x0a\x20\x20float\x20d\x20=\x20q.x\x20-\x20min(q.w,\x20q.y);\x0a\x20\x20float\x20e\x20=\x201.0e-10;\x0a\x20\x20return\x20vec3(abs(q.z\x20+\x20(q.w\x20-\x20q.y)\x20/\x20(6.0\x20*\x20d\x20+\x20e)),\x20d\x20/\x20(q.x\x20+\x20e),\x20q.x);\x0a}\x0a\x0aconst\x20vec3\x20skyCol\x20\x20\x20\x20\x20\x20\x20=\x20HSV2RGB(vec3(0.58,\x200.86,\x201.0));\x0aconst\x20vec3\x20speCol1\x20\x20\x20\x20\x20\x20=\x20HSV2RGB(vec3(0.60,\x200.25,\x201.0));\x0aconst\x20vec3\x20speCol2\x20\x20\x20\x20\x20\x20=\x20HSV2RGB(vec3(0.55,\x200.25,\x201.0));\x0aconst\x20vec3\x20diffCol1\x20\x20\x20\x20\x20=\x20HSV2RGB(vec3(0.60,\x200.90,\x201.0));\x0aconst\x20vec3\x20diffCol2\x20\x20\x20\x20\x20=\x20HSV2RGB(vec3(0.55,\x200.90,\x201.0));\x0aconst\x20vec3\x20sunCol1\x20\x20\x20\x20\x20\x20=\x20HSV2RGB(vec3(0.60,\x200.50,\x200.5));\x0aconst\x20vec3\x20sunDir2\x20\x20\x20\x20\x20\x20=\x20vec3(0.0,\x200.634517,\x200.772909);\x0aconst\x20vec3\x20sunDir\x20\x20\x20\x20\x20\x20\x20=\x20vec3(0.0,\x200.049938,\x200.998752);\x0aconst\x20vec3\x20sunCol\x20\x20\x20\x20\x20\x20\x20=\x20HSV2RGB(vec3(0.58,\x200.86,\x200.0005));\x0aconst\x20float\x20mountainPos\x20=\x20-20.0;\x0a\x0afloat\x20atan_approx(float\x20y,\x20float\x20x)\x20{\x0a\x20\x20float\x20cosatan2\x20=\x20x\x20/\x20(abs(x)\x20+\x20abs(y));\x0a\x20\x20float\x20t\x20=\x20PI_2\x20-\x20cosatan2\x20*\x20PI_2;\x0a\x20\x20return\x20y\x20<\x200.0\x20?\x20-t\x20:\x20t;\x0a}\x0a\x0afloat\x20tanh_approx(float\x20x)\x20{\x0a\x20\x20float\x20x2\x20=\x20x*x;\x0a\x20\x20return\x20clamp(x*(27.0\x20+\x20x2)/(27.0+9.0*x2),\x20-1.0,\x201.0);\x0a}\x0a\x0avec2\x20toPolar2(vec2\x20p)\x20{\x0a\x20\x20return\x20vec2(length(p),\x20atan_approx(p.y,\x20p.x));\x0a}\x0a\x0avec2\x20toRect2(vec2\x20p)\x20{\x0a\x20\x20return\x20vec2(p.x\x20*\x20cos(p.y),\x20p.x\x20*\x20sin(p.y));\x0a}\x0a\x0avec3\x20toSpherical(vec3\x20p)\x20{\x0a\x20\x20float\x20r\x20\x20\x20=\x20length(p);\x0a\x20\x20float\x20t\x20\x20\x20=\x20acos(p.z/r);\x0a\x20\x20float\x20ph\x20\x20=\x20atan_approx(p.y,\x20p.x);\x0a\x20\x20return\x20vec3(r,\x20t,\x20ph);\x0a}\x0a\x0afloat\x20safeFwidth(float\x20value)\x20{\x0a#if\x20HAS_DERIVATIVES\x0a\x20\x20return\x20fwidth(value);\x0a#else\x0a\x20\x20return\x200.001;\x0a#endif\x0a}\x0a\x0afloat\x20safeDFdy(float\x20value)\x20{\x0a#if\x20HAS_DERIVATIVES\x0a\x20\x20return\x20dFdy(value);\x0a#else\x0a\x20\x20return\x200.0;\x0a#endif\x0a}\x0a\x0avec3\x20tanh_vec(vec3\x20v)\x20{\x0a\x20\x20return\x20vec3(tanh_approx(v.x),\x20tanh_approx(v.y),\x20tanh_approx(v.z));\x0a}\x0a\x0avec3\x20sRGB(vec3\x20t)\x20{\x0a\x20\x20return\x20mix(1.055*pow(t,\x20vec3(1./2.4))\x20-\x200.055,\x2012.92*t,\x20step(t,\x20vec3(0.0031308)));\x0a}\x0a\x0avec3\x20aces_approx(vec3\x20v)\x20{\x0a\x20\x20v\x20=\x20max(v,\x200.0);\x0a\x20\x20v\x20*=\x200.6;\x0a\x20\x20float\x20a\x20=\x202.51;\x0a\x20\x20float\x20b\x20=\x200.03;\x0a\x20\x20float\x20c\x20=\x202.43;\x0a\x20\x20float\x20d\x20=\x200.59;\x0a\x20\x20float\x20e\x20=\x200.14;\x0a\x20\x20return\x20clamp((v*(a*v+b))/(v*(c*v+d)+e),\x200.0,\x201.0);\x0a}\x0a\x0afloat\x20mod1(inout\x20float\x20p,\x20float\x20size)\x20{\x0a\x20\x20float\x20halfsize\x20=\x20size*0.5;\x0a\x20\x20float\x20c\x20=\x20floor((p\x20+\x20halfsize)/size);\x0a\x20\x20p\x20=\x20mod(p\x20+\x20halfsize,\x20size)\x20-\x20halfsize;\x0a\x20\x20return\x20c;\x0a}\x0a\x0avec2\x20mod2(inout\x20vec2\x20p,\x20vec2\x20size)\x20{\x0a\x20\x20vec2\x20c\x20=\x20floor((p\x20+\x20size*0.5)/size);\x0a\x20\x20p\x20=\x20mod(p\x20+\x20size*0.5,size)\x20-\x20size*0.5;\x0a\x20\x20return\x20c;\x0a}\x0a\x0afloat\x20rayPlane(vec3\x20ro,\x20vec3\x20rd,\x20vec4\x20p)\x20{\x0a\x20\x20return\x20-(dot(ro,p.xyz)+p.w)/dot(rd,p.xyz);\x0a}\x0a\x0afloat\x20equilateralTriangle(vec2\x20p)\x20{\x0a\x20\x20const\x20float\x20k\x20=\x20sqrt(3.0);\x0a\x20\x20p.x\x20=\x20abs(p.x)\x20-\x201.0;\x0a\x20\x20p.y\x20=\x20p.y\x20+\x201.0/k;\x0a\x20\x20if(\x20p.x+k*p.y>0.0\x20)\x20p\x20=\x20vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;\x0a\x20\x20p.x\x20-=\x20clamp(\x20p.x,\x20-2.0,\x200.0\x20);\x0a\x20\x20return\x20-length(p)*sign(p.y);\x0a}\x0a\x0afloat\x20box(vec2\x20p,\x20vec2\x20b)\x20{\x0a\x20\x20vec2\x20d\x20=\x20abs(p)-b;\x0a\x20\x20return\x20length(max(d,0.0))\x20+\x20min(max(d.x,d.y),0.0);\x0a}\x0a\x0afloat\x20segment(vec2\x20p,\x20vec2\x20a,\x20vec2\x20b)\x20{\x0a\x20\x20vec2\x20pa\x20=\x20p-a,\x20ba\x20=\x20b-a;\x0a\x20\x20float\x20h\x20=\x20clamp(\x20dot(pa,ba)/dot(ba,ba),\x200.0,\x201.0\x20);\x0a\x20\x20return\x20length(pa\x20-\x20ba*h);\x0a}\x0a\x0afloat\x20hash(vec2\x20co)\x20{\x0a\x20\x20return\x20fract(sin(dot(co.xy\x20,vec2(12.9898,58.233)))\x20*\x2013758.5453);\x0a}\x0a\x0afloat\x20vnoise(vec2\x20p)\x20{\x0a\x20\x20vec2\x20i\x20=\x20floor(p);\x0a\x20\x20vec2\x20f\x20=\x20fract(p);\x0a\x20\x20\x20\x20\x0a\x20\x20vec2\x20u\x20=\x20f*f*(3.0-2.0*f);\x0a\x0a\x20\x20float\x20a\x20=\x20hash(i\x20+\x20vec2(0.0,0.0));\x0a\x20\x20float\x20b\x20=\x20hash(i\x20+\x20vec2(1.0,0.0));\x0a\x20\x20float\x20c\x20=\x20hash(i\x20+\x20vec2(0.0,1.0));\x0a\x20\x20float\x20d\x20=\x20hash(i\x20+\x20vec2(1.0,1.0));\x0a\x20\x20\x0a\x20\x20float\x20m0\x20=\x20mix(a,\x20b,\x20u.x);\x0a\x20\x20float\x20m1\x20=\x20mix(c,\x20d,\x20u.x);\x0a\x20\x20float\x20m2\x20=\x20mix(m0,\x20m1,\x20u.y);\x0a\x20\x20\x0a\x20\x20return\x20m2;\x0a}\x0a\x0avec2\x20raySphere(vec3\x20ro,\x20vec3\x20rd,\x20vec4\x20dim)\x20{\x0a\x20\x20vec3\x20ce\x20=\x20dim.xyz;\x0a\x20\x20float\x20ra\x20=\x20dim.w;\x0a\x20\x20vec3\x20oc\x20=\x20ro\x20-\x20ce;\x0a\x20\x20float\x20b\x20=\x20dot(\x20oc,\x20rd\x20);\x0a\x20\x20float\x20c\x20=\x20dot(\x20oc,\x20oc\x20)\x20-\x20ra*ra;\x0a\x20\x20float\x20h\x20=\x20b*b\x20-\x20c;\x0a\x20\x20if(\x20h<0.0\x20)\x20return\x20vec2(-1.0);\x0a\x20\x20h\x20=\x20sqrt(\x20h\x20);\x0a\x20\x20return\x20vec2(\x20-b-h,\x20-b+h\x20);\x0a}\x0a\x0avec3\x20skyRender(vec3\x20ro,\x20vec3\x20rd)\x20{\x0a\x20\x20vec3\x20col\x20=\x20vec3(0.0);\x0a\x20\x20col\x20+=\x200.025*skyCol;\x0a\x20\x20col\x20+=\x20skyCol*0.0033/pow((1.001+((dot(sunDir2,\x20rd)))),\x202.0);\x0a\x0a\x20\x20float\x20tp0\x20\x20=\x20rayPlane(ro,\x20rd,\x20vec4(vec3(0.0,\x201.0,\x200.0),\x204.0));\x0a\x20\x20float\x20tp1\x20\x20=\x20rayPlane(ro,\x20rd,\x20vec4(vec3(0.0,\x20-1.0,\x200.0),\x206.0));\x0a\x20\x20float\x20tp\x20=\x20tp1;\x0a\x20\x20tp\x20=\x20max(tp0,tp1);\x0a\x0a\x20\x20if\x20(tp1\x20>\x200.0)\x20{\x0a\x20\x20\x20\x20vec3\x20pos\x20\x20=\x20ro\x20+\x20tp1*rd;\x0a\x20\x20\x20\x20vec2\x20pp\x20=\x20pos.xz;\x0a\x20\x20\x20\x20float\x20db\x20=\x20box(pp,\x20vec2(5.0,\x209.0))-3.0;\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20col\x20+=\x20vec3(4.0)*skyCol*rd.y*rd.y*smoothstep(0.25,\x200.0,\x20db);\x0a\x20\x20\x20\x20col\x20+=\x20vec3(0.8)*skyCol*exp(-0.5*max(db,\x200.0));\x0a\x20\x20\x20\x20col\x20+=\x200.25*sqrt(skyCol)*max(-db,\x200.0);\x0a\x20\x20}\x0a\x0a\x20\x20if\x20(tp0\x20>\x200.0)\x20{\x0a\x20\x20\x20\x20vec3\x20pos\x20\x20=\x20ro\x20+\x20tp0*rd;\x0a\x20\x20\x20\x20vec2\x20pp\x20=\x20pos.xz;\x0a\x20\x20\x20\x20float\x20ds\x20=\x20length(pp)\x20-\x200.5;\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20col\x20+=\x20(0.25)*skyCol*exp(-.5*max(ds,\x200.0));\x0a\x20\x20}\x0a\x0a\x20\x20return\x20clamp(col,\x200.0,\x2010.0);\x0a}\x0a\x0avec4\x20sphere(vec3\x20ro,\x20vec3\x20rd,\x20vec4\x20sdim)\x20{\x0a\x20\x20vec2\x20si\x20=\x20raySphere(ro,\x20rd,\x20sdim);\x0a\x20\x20\x0a\x20\x20vec3\x20nsp\x20=\x20ro\x20+\x20rd*si.x;\x0a\x0a\x20\x20const\x20vec3\x20lightPos1\x20\x20\x20=\x20vec3(0.0,\x2010.0,\x2010.0);\x0a\x20\x20const\x20vec3\x20lightPos2\x20\x20\x20=\x20vec3(0.0,\x20-80.0,\x2010.0);\x0a\x20\x20\x0a\x20\x20vec3\x20nld1\x20\x20\x20=\x20normalize(lightPos1-nsp);\x20\x0a\x20\x20vec3\x20nld2\x20\x20\x20=\x20normalize(lightPos2-nsp);\x20\x0a\x20\x20\x0a\x20\x20vec3\x20nnor\x20\x20\x20=\x20normalize(nsp\x20-\x20sdim.xyz);\x0a\x0a\x20\x20vec3\x20nref\x20\x20\x20=\x20reflect(rd,\x20nnor);\x0a\x0a\x20\x20const\x20float\x20sf\x20=\x204.0;\x0a\x20\x20float\x20ndif1\x20=\x20max(dot(nld1,\x20nnor),\x200.0);\x0a\x20\x20ndif1\x20\x20\x20\x20\x20\x20\x20*=\x20ndif1;\x0a\x20\x20vec3\x20nspe1\x20\x20=\x20pow(speCol1*max(dot(nld1,\x20nref),\x200.0),\x20sf*vec3(1.0,\x200.8,\x200.5));\x0a\x0a\x20\x20float\x20ndif2\x20=\x20max(dot(nld2,\x20nnor),\x200.0);\x0a\x20\x20ndif2\x20\x20\x20\x20\x20\x20\x20*=\x20ndif2;\x0a\x20\x20vec3\x20nspe2\x20\x20=\x20pow(speCol2*max(dot(nld2,\x20nref),\x200.0),\x20sf*vec3(0.9,\x200.5,\x200.5));\x0a\x0a\x20\x20vec3\x20nsky\x20\x20\x20=\x20skyRender(nsp,\x20nref);\x0a\x20\x20float\x20nfre\x20\x20=\x201.0+dot(rd,\x20nnor);\x0a\x20\x20nfre\x20\x20\x20\x20\x20\x20\x20\x20*=\x20nfre;\x0a\x0a\x20\x20vec3\x20scol\x20=\x20vec3(0.0);\x20\x0a\x20\x20scol\x20+=\x20nsky*mix(vec3(0.25),\x20vec3(0.5,\x200.5,\x201.0),\x20nfre);\x0a\x20\x20scol\x20+=\x20diffCol1*ndif1;\x0a\x20\x20scol\x20+=\x20diffCol2*ndif2;\x0a\x20\x20scol\x20+=\x20nspe1;\x0a\x20\x20scol\x20+=\x20nspe2;\x0a\x20\x20\x0a\x20\x20float\x20t\x20=\x20tanh_approx(2.0*(si.y-si.x)/sdim.w);\x0a\x20\x20\x0a\x20\x20return\x20vec4(scol,\x20t);\x0a}\x0a\x0avec3\x20sphereRender(vec3\x20ro,\x20vec3\x20rd)\x20{\x0a\x20\x20vec3\x20skyCol\x20=\x20skyRender(ro,\x20rd);\x0a\x20\x20vec3\x20col\x20=\x20skyCol;\x0a\x20\x20vec4\x20sdim0\x20=\x20vec4(vec3(0.0),\x202.0\x20+\x201.2\x20*\x20uBass\x20+\x200.5\x20*\x20uBeatPulse);\x0a\x20\x20vec4\x20scol0\x20=\x20sphere(ro,\x20rd,\x20sdim0);\x0a\x20\x20float\x20sphereMix\x20=\x20clamp(0.5\x20+\x200.4\x20*\x20uBeatPulse\x20+\x200.2\x20*\x20uTreble,\x200.0,\x201.0);\x0a\x20\x20col\x20=\x20mix(col,\x20scol0.xyz\x20*\x20(0.9\x20+\x200.3\x20*\x20uTreble),\x20scol0.w\x20*\x20sphereMix);\x0a\x20\x20return\x20col;\x0a}\x0a\x0avec3\x20sphereEffect(vec2\x20p)\x20{\x0a\x20\x20float\x20fov\x20=\x20tan(TAU/6.0);\x0a\x20\x20vec3\x20ro\x20=\x20vec3(0.0,\x202.0\x20+\x20uEnergy,\x205.0\x20-\x203.0\x20*\x20uBass);\x0a\x20\x20vec3\x20la\x20=\x20vec3(0.4\x20*\x20uStereo,\x200.0,\x200.0);\x0a\x20\x20vec3\x20up\x20=\x20vec3(0.0,\x201.0,\x200.0);\x0a\x0a\x20\x20vec3\x20ww\x20=\x20normalize(la\x20-\x20ro);\x0a\x20\x20vec3\x20uu\x20=\x20normalize(cross(up,\x20ww));\x0a\x20\x20vec3\x20vv\x20=\x20cross(ww,uu);\x0a\x20\x20vec3\x20rd\x20=\x20normalize(-p.x*uu\x20+\x20p.y*vv\x20+\x20fov*ww);\x0a\x0a\x20\x20vec3\x20col\x20=\x20sphereRender(ro,\x20rd);\x0a\x20\x20\x0a\x20\x20return\x20col;\x0a}\x0a\x0avec3\x20cityOfKali(vec2\x20p)\x20{\x0a\x20\x20vec2\x20c\x20=\x20-vec2(0.5,\x200.5)*1.12;\x0a\x0a\x20\x20float\x20s\x20=\x202.0\x20+\x200.25\x20*\x20uFlux;\x0a\x20\x20vec2\x20kp\x20=\x20p/s;\x0a\x20\x0a\x20\x20const\x20float\x20a\x20=\x20PI/4.0;\x0a\x20\x20const\x20vec2\x20n\x20=\x20vec2(cos(a),\x20sin(a));\x0a\x0a\x20\x20float\x20ot2\x20=\x201E6;\x0a\x20\x20float\x20ot3\x20=\x201E6;\x0a\x20\x20float\x20n2\x20=\x200.0;\x0a\x20\x20float\x20n3\x20=\x200.0;\x0a\x0a\x20\x20const\x20float\x20mx\x20=\x2012.0;\x0a\x20\x20for\x20(float\x20i\x20=\x200.0;\x20i\x20<\x20mx;\x20++i)\x20{\x0a\x20\x20\x20\x20float\x20m\x20=\x20(dot(kp,\x20kp));\x0a\x20\x20\x20\x20s\x20*=\x20m;\x0a\x20\x20\x20\x20kp\x20=\x20abs(kp)/m\x20+\x20c;\x0a\x20\x20\x20\x20float\x20d2\x20=\x20(abs(dot(kp,n)))*s;\x0a\x20\x20\x20\x20if\x20(d2\x20<\x20ot2)\x20{\x0a\x20\x20\x20\x20\x20\x20n2\x20=\x20i;\x0a\x20\x20\x20\x20\x20\x20ot2\x20=\x20d2;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20float\x20d3\x20=\x20(dot(kp,\x20kp));\x0a\x20\x20\x20\x20if\x20(d3\x20<\x20ot3)\x20{\x0a\x20\x20\x20\x20\x20\x20n3\x20=\x20i;\x0a\x20\x20\x20\x20\x20\x20ot3\x20=\x20d3;\x0a\x20\x20\x20\x20}\x0a\x20\x20}\x0a\x20\x20vec3\x20col\x20=\x20vec3(0.0);\x0a\x20\x20n2\x20/=\x20mx;\x0a\x20\x20n3\x20/=\x20mx;\x0a\x20\x20float\x20beatGlow\x20=\x201.0\x20+\x200.6\x20*\x20uBeatPulse;\x0a\x20\x20float\x20fluxSpark\x20=\x200.85\x20+\x200.4\x20*\x20clamp(uFlux,\x200.0,\x201.5);\x0a\x20\x20col\x20+=\x200.25*(hsv2rgb(vec3(0.8-0.2*n2*n2,\x200.90,\x200.025\x20*\x20beatGlow))/(sqrt(ot2)+0.0025));\x0a\x20\x20col\x20+=\x20hsv2rgb(vec3(0.55+0.8*n3\x20+\x200.15\x20*\x20uColorDrift,\x200.85,\x200.00000025\x20*\x20fluxSpark))/(ot3*ot3+0.000000025);\x0a\x20\x20return\x20col;\x0a}\x0a\x0avec3\x20outerSkyRender(vec3\x20ro,\x20vec3\x20rd)\x20{\x0a\x20\x20vec3\x20center\x20=\x20ro+vec3(-100.0,\x2040.0,\x20100.0);\x0a\x20\x20vec4\x20sdim\x20=\x20vec4(center,\x2050);\x0a\x20\x20vec2\x20pi\x20=\x20raySphere(ro,\x20rd,\x20sdim);\x0a\x20\x20vec3\x20pn\x20=\x20normalize(vec3(0.,\x201.0,\x20-0.8));\x0a\x20\x20vec4\x20pdim\x20=\x20vec4(pn,\x20-dot(pn,\x20center));\x20\x0a\x20\x20float\x20ri\x20=\x20rayPlane(ro,\x20rd,\x20pdim);\x0a\x0a\x20\x20vec3\x20col\x20=\x20vec3(0.0);\x0a\x20\x20\x0a\x20\x20col\x20+=\x20sunCol/pow((1.001-((dot(sunDir,\x20rd)))),\x202.0);\x0a\x0a\x20\x20if\x20(pi.x\x20!=\x20-1.0)\x20{\x0a\x20\x20\x20\x20vec3\x20pp\x20=\x20ro\x20+\x20rd*pi.x;\x0a\x20\x20\x20\x20vec3\x20psp=\x20pp-sdim.xyz;\x0a\x20\x20\x20\x20vec3\x20pn2\x20=\x20normalize(pp-sdim.xyz);\x0a\x20\x20\x20\x20psp\x20=\x20psp.zxy;\x0a\x20\x20\x20\x20psp.yz\x20*=\x20ROT(-0.5\x20+\x200.25\x20*\x20uStereo);\x0a\x20\x20\x20\x20psp.xy\x20*=\x20ROT(0.025*TIME\x20+\x200.35\x20*\x20uPhrase\x20+\x200.25\x20*\x20uBeatPulse);\x0a\x20\x20\x20\x20vec3\x20pss=\x20toSpherical(psp);\x0a\x20\x20\x20\x20vec3\x20pcol\x20=\x20vec3(0.0);\x0a\x20\x20\x20\x20float\x20dif\x20=\x20max(dot(pn2,\x20sunDir),\x200.0);\x0a\x20\x20\x20\x20vec3\x20sc\x20=\x202000.0*sunCol;\x0a\x20\x20\x20\x20pcol\x20+=\x20sc*dif;\x0a\x20\x20\x20\x20pcol\x20+=\x20(cityOfKali(pss.yz))*smoothstep(0.125,\x200.0,\x20dif);\x0a\x20\x20\x20\x20pcol\x20+=\x20pow(max(dot(reflect(rd,\x20pn2),\x20sunDir),\x200.0),\x209.0)*sc;\x0a\x20\x20\x20\x20col\x20=\x20mix(col,\x20pcol,\x20tanh_approx(0.125*(pi.y-pi.x)));\x0a\x20\x20\x20\x20\x0a\x20\x20}\x0a\x0a\x20\x20vec3\x20gcol\x20=\x20vec3(0.0);\x0a\x0a\x20\x20vec3\x20rp\x20=\x20ro\x20+\x20rd*ri;\x0a\x20\x20float\x20rl\x20=\x20length(rp-center);\x0a\x20\x20float\x20rb\x20=\x201.55*sdim.w;\x0a\x20\x20float\x20re\x20=\x202.45*sdim.w;\x0a\x20\x20float\x20rw\x20=\x200.1*sdim.w;\x0a\x20\x20vec3\x20rcol\x20=\x20hsv2rgb(vec3(clamp((0.005*(rl+32.0)),\x200.6,\x200.8),\x200.9,\x201.0));\x0a\x20\x20gcol\x20=\x20rcol*0.025;\x0a\x20\x20if\x20(ri\x20>\x200.0\x20&&\x20(pi.x\x20==\x20-1.0\x20||\x20ri\x20<\x20pi.x))\x20{\x0a\x20\x20\x20\x20float\x20mrl\x20=\x20rl;\x0a\x20\x20\x20\x20float\x20nrl\x20=\x20mod1(mrl,\x20rw);\x0a\x20\x20\x20\x20float\x20rfre\x20=\x201.0+dot(rd,\x20pn);\x0a\x20\x20\x20\x20vec3\x20rrcol\x20=\x20(rcol/max(abs(mrl),\x200.1+smoothstep(0.7,\x201.0,\x20rfre)));\x20\x0a\x20\x20\x20\x20rrcol\x20*=\x20smoothstep(1.0,\x200.3,\x20rfre);\x0a\x20\x20\x20\x20rrcol\x20*=\x20smoothstep(re,\x20re-0.5*rw,\x20rl);\x0a\x20\x20\x20\x20rrcol\x20*=\x20smoothstep(rb-0.5*rw,\x20rb,\x20rl);\x0a\x20\x20\x20\x20col\x20+=\x20rrcol;\x0a\x20\x20}\x0a\x0a\x20\x20col\x20+=\x20gcol/max(abs(rd.y),\x200.0033);\x0a\x0a\x20\x20return\x20col;\x0a}\x0a\x0avec3\x20triRender(vec3\x20col,\x20vec3\x20ro,\x20vec3\x20rd,\x20inout\x20float\x20maxt)\x20{\x0a\x20\x20vec3\x20tpn\x20=\x20normalize(vec3(0.0,\x200.0,\x201.0));\x0a\x20\x20vec4\x20tpdim\x20=\x20vec4(tpn,\x20-2.0);\x0a\x20\x20float\x20tpd\x20=\x20rayPlane(ro,\x20rd,\x20tpdim);\x0a\x0a\x20\x20if\x20(tpd\x20<\x200.0\x20||\x20tpd\x20>\x20maxt)\x20{\x0a\x20\x20\x20\x20return\x20col;\x0a\x20\x20}\x0a\x0a\x20\x20vec3\x20pp\x20=\x20ro+rd*tpd;\x0a\x20\x20vec2\x20p\x20=\x20pp.xy;\x0a\x20\x20float\x20beatWarp\x20=\x200.5\x20+\x200.25\x20*\x20uBass;\x0a\x20\x20beatWarp\x20*=\x201.0\x20+\x200.2\x20*\x20uBeatPulse;\x0a\x20\x20p\x20*=\x20beatWarp;\x0a\x0a\x20\x20const\x20float\x20off\x20=\x201.2-0.02;\x0a\x20\x20vec2\x20op\x20=\x20p;\x20\x0a\x20\x20p.y\x20-=\x20off;\x0a\x20\x20const\x20vec2\x20n\x20=\x20SCA(-PI/3.0);\x0a\x20\x20vec2\x20gp\x20=\x20p;\x0a\x20\x20float\x20hoff\x20=\x200.15*dot(n,\x20p);\x0a\x20\x20vec3\x20gcol\x20=\x20hsv2rgb(vec3(clamp(0.7+hoff+0.2*uColorDrift,\x200.6,\x200.8),\x200.90,\x200.02\x20+\x200.4\x20*\x20uTreble));\x0a\x20\x20vec2\x20pt\x20=\x20p;\x0a\x20\x20pt.y\x20=\x20-pt.y;\x0a\x20\x20const\x20float\x20zt\x20=\x201.0;\x0a\x20\x20float\x20dt\x20=\x20equilateralTriangle(pt/zt)*zt;\x0a\x20\x20if\x20(dt\x20<\x200.0)\x20{\x0a\x20\x20\x20\x20vec2\x20pulseP\x20=\x20p\x20*\x20(1.0\x20+\x200.15\x20*\x20uBeatPulse);\x0a\x20\x20\x20\x20col\x20=\x20sphereEffect(1.5\x20*\x20pulseP);\x0a\x20\x20}\x0a\x20\x20float\x20rimMix\x20=\x20smoothstep(0.25,\x200.0,\x20dt);\x0a\x20\x20rimMix\x20*=\x201.0\x20+\x200.4\x20*\x20uBeatPulse;\x0a\x20\x20col\x20+=\x20(gcol/max(abs(dt),\x200.001))*rimMix;\x0a\x20\x20if\x20(dt\x20<\x200.0)\x20{\x0a\x20\x20\x20\x20maxt\x20=\x20tpd;\x0a\x20\x20}\x0a\x20\x20return\x20col;\x20\x20\x0a}\x0a\x0afloat\x20heightFactor(vec2\x20p)\x20{\x0a\x20\x20return\x204.0*smoothstep(7.0,\x200.5,\x20abs(p.x))+.5;\x0a}\x0a\x0afloat\x20hifbm(vec2\x20p)\x20{\x0a\x20\x20p\x20*=\x200.25;\x0a\x20\x20float\x20hf\x20=\x20heightFactor(p);\x0a\x20\x20const\x20float\x20aa\x20=\x200.5;\x0a\x20\x20const\x20float\x20pp\x20=\x202.0;\x0a\x0a\x20\x20float\x20sum\x20=\x200.0;\x0a\x20\x20float\x20a\x20\x20\x20=\x201.0;\x0a\x20\x20\x0a\x20\x20for\x20(int\x20i\x20=\x200;\x20i\x20<\x205;\x20++i)\x20{\x0a\x20\x20\x20\x20sum\x20+=\x20a*vnoise(p);\x0a\x20\x20\x20\x20a\x20*=\x20aa;\x0a\x20\x20\x20\x20p\x20*=\x20pp;\x0a\x20\x20}\x0a\x20\x20\x0a\x20\x20return\x20hf*sum;\x0a}\x0a\x0afloat\x20hiheight(vec2\x20p)\x20{\x0a\x20\x20return\x20hifbm(p);\x0a}\x0a\x0afloat\x20lofbm(vec2\x20p)\x20{\x0a\x20\x20p\x20*=\x200.25;\x0a\x20\x20float\x20hf\x20=\x20heightFactor(p);\x0a\x20\x20const\x20float\x20aa\x20=\x200.5;\x0a\x20\x20const\x20float\x20pp\x20=\x202.0;\x0a\x0a\x20\x20float\x20sum\x20=\x200.0;\x0a\x20\x20float\x20a\x20\x20\x20=\x201.0;\x0a\x20\x20\x0a\x20\x20for\x20(int\x20i\x20=\x200;\x20i\x20<\x203;\x20++i)\x20{\x0a\x20\x20\x20\x20sum\x20+=\x20a*vnoise(p);\x0a\x20\x20\x20\x20a\x20*=\x20aa;\x0a\x20\x20\x20\x20p\x20*=\x20pp;\x0a\x20\x20}\x0a\x20\x20\x0a\x20\x20return\x20hf*sum;\x0a}\x0a\x0afloat\x20loheight(vec2\x20p)\x20{\x0a\x20\x20return\x20lofbm(p)-0.5;\x0a}\x0a\x0avec3\x20mountainRender(vec3\x20col,\x20vec3\x20ro,\x20vec3\x20rd,\x20bool\x20flip,\x20inout\x20float\x20maxt)\x20{\x0a\x20\x20vec3\x20tpn\x20=\x20normalize(vec3(0.0,\x200.0,\x201.0));\x0a\x20\x20vec4\x20tpdim\x20=\x20vec4(tpn,\x20mountainPos);\x0a\x20\x20float\x20tpd\x20=\x20rayPlane(ro,\x20rd,\x20tpdim);\x0a\x0a\x20\x20if\x20(tpd\x20<\x200.0\x20||\x20tpd\x20>\x20maxt)\x20{\x0a\x20\x20\x20\x20return\x20col;\x0a\x20\x20}\x0a\x0a\x20\x20vec3\x20pp\x20=\x20ro+rd*tpd;\x0a\x20\x20vec2\x20p\x20=\x20pp.xy;\x0a\x20\x20const\x20float\x20cw\x20=\x200.75;\x0a\x20\x20float\x20hz\x20=\x200.15*TIME+1.0\x20+\x201.2\x20*\x20uPhrase\x20+\x200.3\x20*\x20uBass;\x0a\x20\x20float\x20lo\x20=\x20loheight(vec2(p.x,\x20hz));\x0a\x20\x20vec2\x20cp\x20=\x20p;\x0a\x20\x20float\x20cn\x20=\x20mod1(cp.x,\x20cw);\x0a\x0a\x20\x20const\x20float\x20reps\x20=\x201.0;\x0a\x0a\x20\x20float\x20d\x20=\x201E3;\x0a\x0a\x20\x20for\x20(float\x20i\x20=\x20-reps;\x20i\x20<=\x20reps;\x20++i)\x20{\x0a\x20\x20\x20\x20float\x20x0\x20=\x20(cn\x20-0.5\x20+\x20(i))*cw;\x0a\x20\x20\x20\x20float\x20x1\x20=\x20(cn\x20-0.5\x20+\x20(i\x20+\x201.0))*cw;\x0a\x20\x20\x0a\x20\x20\x20\x20float\x20y0\x20=\x20hiheight(vec2(x0,\x20hz));\x0a\x20\x20\x20\x20float\x20y1\x20=\x20hiheight(vec2(x1,\x20hz));\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20float\x20dd\x20=\x20segment(cp,\x20vec2(-cw*0.5\x20+\x20cw\x20*\x20float(i),\x20y0),\x20vec2(cw*0.5\x20+\x20cw\x20*\x20float(i),\x20y1));\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20d\x20=\x20min(d,\x20dd);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20ridgeGlow\x20=\x200.125\x20+\x200.6\x20*\x20uEnergy\x20+\x200.35\x20*\x20uBeatPulse;\x0a\x20\x20vec3\x20rcol\x20=\x20hsv2rgb(vec3(clamp(0.7+(0.5*(rd.x+0.2*uStereo)),\x200.6,\x200.8),\x200.95,\x20ridgeGlow));\x0a\x0a\x20\x20float\x20sd\x20=\x201.0001-((dot(sunDir,\x20rd)));\x0a\x0a\x20\x20vec3\x20mcol\x20=\x20col;\x0a\x20\x20float\x20aa\x20=\x20safeFwidth(p.y);\x0a\x20\x20if\x20((safeDFdy(d)\x20<\x200.0)\x20==\x20!flip)\x20{\x0a\x20\x20\x20\x20mcol\x20*=\x20mix(0.0,\x201.0,\x20smoothstep(aa,\x20-aa,\x20d-aa));\x0a\x20\x20\x20\x20mcol\x20+=\x20HSV2RGB(vec3(0.55,\x200.85,\x200.8))*smoothstep(0.0,\x205.0,\x20lo-p.y);\x0a\x20\x20\x20\x20col\x20=\x20mcol;\x0a\x20\x20\x20\x20maxt\x20=\x20tpd;\x0a\x20\x20}\x0a\x20\x20col\x20+=\x203.0*rcol/(abs(d)+0.005+800.0*sd*sd*sd*sd);\x0a\x20\x20col\x20+=\x20HSV2RGB(vec3(0.55\x20+\x200.1\x20*\x20uColorDrift,\x200.96,\x200.075\x20+\x200.25\x20*\x20uTreble))/(abs(p.y)+0.05);\x0a\x0a\x20\x20return\x20col;\x20\x20\x0a}\x0a\x0avec3\x20groundRender(vec3\x20col,\x20vec3\x20ro,\x20vec3\x20rd,\x20inout\x20float\x20maxt)\x20{\x0a\x20\x20vec3\x20gpn\x20=\x20normalize(vec3(0.0,\x201.0,\x200.0));\x0a\x20\x20vec4\x20gpdim\x20=\x20vec4(gpn,\x200.0);\x0a\x20\x20float\x20gpd\x20=\x20rayPlane(ro,\x20rd,\x20gpdim);\x0a\x0a\x20\x20if\x20(gpd\x20<\x200.0)\x20{\x0a\x20\x20\x20\x20return\x20col;\x0a\x20\x20}\x0a\x20\x20\x0a\x20\x20maxt\x20=\x20gpd;\x0a\x20\x20\x0a\x20\x20vec3\x20gp\x20\x20\x20\x20\x20=\x20ro\x20+\x20rd*gpd;\x0a\x20\x20float\x20gpfre\x20=\x201.0\x20+\x20dot(rd,\x20gpn);\x0a\x20\x20gpfre\x20*=\x20gpfre;\x0a\x20\x20gpfre\x20*=\x20gpfre;\x0a\x20\x20gpfre\x20*=\x20gpfre;\x0a\x20\x20\x0a\x20\x20vec3\x20grr\x20=\x20reflect(rd,\x20gpn);\x0a\x20\x20\x0a\x20\x20vec2\x20ggp\x20\x20\x20\x20=\x20gp.xz;\x0a\x20\x20ggp.y\x20+=\x20TIME\x20*\x20(0.35\x20+\x200.45\x20*\x20uEnergy);\x0a\x20\x20float\x20dfy\x20\x20\x20=\x20safeDFdy(ggp.y);\x0a\x20\x20float\x20gcf\x20=\x20sin(ggp.x\x20+\x200.5\x20*\x20uStereo)*sin(ggp.y);\x0a\x20\x20vec2\x20ggn\x20\x20\x20\x20=\x20mod2(ggp,\x20vec2(1.0));\x0a\x20\x20float\x20ggd\x20\x20\x20=\x20min(abs(ggp.x),\x20abs(ggp.y));\x0a\x0a\x20\x20vec3\x20gcol\x20=\x20hsv2rgb(\x0a\x20\x20\x20\x20vec3(0.7+0.1*gcf\x20+\x200.08\x20*\x20uStereo,\x200.90,\x200.02\x20+\x200.3\x20*\x20uDrop\x20+\x200.25\x20*\x20clamp(uFlux,\x200.0,\x201.2))\x0a\x20\x20);\x0a\x20\x20\x0a\x20\x20float\x20rmaxt\x20=\x201E6;\x0a\x20\x20vec3\x20rcol\x20=\x20outerSkyRender(gp,\x20grr);\x0a\x20\x20rcol\x20=\x20mountainRender(rcol,\x20gp,\x20grr,\x20true,\x20rmaxt);\x0a\x20\x20rcol\x20=\x20triRender(rcol,\x20gp,\x20grr,\x20rmaxt);\x0a\x0a\x20\x20col\x20=\x20gcol/max(ggd,\x200.0+0.25*dfy)*exp(-0.25*gpd);\x0a\x20\x20float\x20reflectionTint\x20=\x200.65\x20+\x200.05\x20*\x20uColorDrift\x20+\x200.1\x20*\x20uBeatPulse;\x0a\x20\x20rcol\x20+=\x20HSV2RGB(vec3(reflectionTint,\x200.85,\x201.0))*gpfre;\x0a\x20\x20rcol\x20=\x204.0*tanh_vec(rcol*0.25\x20+\x200.08\x20*\x20uBass\x20+\x200.05\x20*\x20uBeatPulse);\x0a\x20\x20col\x20+=\x20rcol*gpfre;\x0a\x0a\x20\x20return\x20col;\x0a}\x0a\x0avec3\x20render(vec3\x20ro,\x20vec3\x20rd)\x20{\x0a\x20\x20float\x20maxt\x20=\x201E6;\x20\x20\x0a\x0a\x20\x20vec3\x20col\x20=\x20outerSkyRender(ro,\x20rd);\x0a\x20\x20col\x20=\x20groundRender(col,\x20ro,\x20rd,\x20maxt);\x0a\x20\x20col\x20=\x20mountainRender(col,\x20ro,\x20rd,\x20false,\x20maxt);\x0a\x20\x20col\x20=\x20triRender(col,\x20ro,\x20rd,\x20maxt);\x0a\x0a\x20\x20return\x20col;\x0a}\x0a\x0avec3\x20effect(vec2\x20p,\x20vec2\x20pp)\x20{\x0a\x20\x20float\x20fov\x20=\x20tan(TAU/6.0\x20+\x200.04\x20*\x20uEnergy);\x0a\x20\x20vec3\x20ro\x20=\x20vec3(0.0,\x20mix(0.8,\x201.4,\x20clamp(uEnergy,\x200.0,\x201.5)),\x20mix(-5.0,\x20-3.6,\x20clamp(uBass,\x200.0,\x201.5)));\x0a\x20\x20vec3\x20la\x20=\x20vec3(0.0,\x201.0,\x200.0);\x0a\x20\x20vec3\x20up\x20=\x20vec3(0.0,\x201.0,\x200.0);\x0a\x0a\x20\x20ro.x\x20+=\x200.45\x20*\x20uStereo;\x0a\x20\x20ro.y\x20+=\x200.2*sin(uPhrase\x20*\x20TAU\x20*\x202.0);\x0a\x20\x20ro.z\x20-=\x200.35\x20*\x20uDrop;\x0a\x0a\x20\x20vec2\x20warpP\x20=\x20p;\x0a\x20\x20warpP\x20*=\x20vec2(1.0\x20+\x200.18\x20*\x20uBass,\x201.0\x20+\x200.1\x20*\x20uEnergy);\x0a\x20\x20warpP\x20+=\x20vec2(uStereo\x20*\x200.12,\x200.05\x20*\x20sin(uPhrase\x20*\x20TAU\x20*\x204.0));\x0a\x0a\x20\x20vec3\x20ww\x20=\x20normalize(la\x20-\x20ro);\x0a\x20\x20vec3\x20uu\x20=\x20normalize(cross(up,\x20ww));\x0a\x20\x20vec3\x20vv\x20=\x20cross(ww,uu);\x0a\x20\x20vec3\x20rd\x20=\x20normalize(-warpP.x*uu\x20+\x20warpP.y*vv\x20+\x20fov*ww);\x0a\x0a\x20\x20float\x20aa\x20=\x202.0/RESOLUTION.y;\x0a\x0a\x20\x20vec3\x20col\x20=\x20render(ro,\x20rd);\x0a#ifdef\x20THAT_CRT_FEELING\x20\x20\x0a\x20\x20col\x20*=\x20smoothstep(1.5,\x200.5,\x20length(pp));\x0a\x20\x20col\x20*=\x201.25*mix(vec3(0.5),\x20vec3(1.0),smoothstep(-0.9,\x200.9,\x20sin(0.25*TAU*p.y/aa+TAU*vec3(0.0,\x201.,\x202.0)/3.0)));\x0a#endif\x20\x20\x0a\x20\x20col\x20-=\x200.05*vec3(.00,\x201.0,\x202.0).zyx;\x0a\x20\x20float\x20stereoHue\x20=\x20clamp(0.5\x20+\x200.4\x20*\x20uStereo,\x200.1,\x200.9);\x0a\x20\x20vec3\x20trebleLift\x20=\x20hsv2rgb(vec3(stereoHue,\x200.65,\x200.8\x20+\x200.2\x20*\x20uTreble));\x0a\x20\x20col\x20=\x20mix(col,\x20col\x20*\x20trebleLift,\x20clamp(uTreble,\x200.0,\x201.0)\x20*\x200.35);\x0a\x20\x20col\x20=\x20mix(col,\x20col.yzx,\x20clamp(0.4\x20+\x200.4\x20*\x20uStereo,\x200.0,\x201.0));\x0a\x20\x20float\x20dropShade\x20=\x20clamp(uDrop\x20*\x200.6,\x200.0,\x201.0);\x0a\x20\x20col\x20=\x20mix(col,\x20col\x20*\x200.75,\x20dropShade);\x0a\x20\x20col\x20=\x20aces_approx(col);\x20\x0a\x20\x20col\x20=\x20sRGB(col);\x0a\x20\x20return\x20col;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20fragCoord\x20=\x20gl_FragCoord.xy;\x0a\x20\x20vec2\x20q\x20=\x20fragCoord\x20/\x20RESOLUTION.xy;\x0a\x0a\x20\x20vec2\x20base\x20=\x20-1.\x20+\x202.\x20*\x20q;\x0a\x20\x20vec2\x20pp\x20=\x20base;\x0a\x20\x20vec2\x20p\x20=\x20base;\x0a\x20\x20p.x\x20*=\x20RESOLUTION.x\x20/\x20RESOLUTION.y;\x0a\x0a\x20\x20float\x20introPhase\x20=\x20clamp(uIntroCollapsePhase,\x200.0,\x201.0);\x0a\x20\x20float\x20introRadius\x20=\x200.0;\x0a\x20\x20if\x20(introPhase\x20>\x200.0001)\x20{\x0a\x20\x20\x20\x20p\x20=\x20applyIntroCollapseUv(p,\x20introPhase,\x20introRadius);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20collapsePhase\x20=\x20clamp(uOutroCollapsePhase,\x200.0,\x201.0);\x0a\x20\x20float\x20collapseRadius\x20=\x200.0;\x0a\x20\x20vec2\x20collapseCoords\x20=\x20p;\x0a\x20\x20if\x20(collapsePhase\x20>\x200.0001)\x20{\x0a\x20\x20\x20\x20collapseCoords\x20=\x20applyOutroCollapseUv(p,\x20collapsePhase,\x20collapseRadius);\x0a\x20\x20}\x0a\x0a\x20\x20vec2\x20loudCoords\x20=\x20collapseCoords;\x0a\x20\x20float\x20loudAmt\x20=\x20clamp(uLoudnessDistortion.x,\x200.0,\x201.0);\x0a\x20\x20float\x20loudRadius\x20=\x200.0;\x0a\x20\x20if\x20(loudAmt\x20>\x200.0001)\x20{\x0a\x20\x20\x20\x20float\x20loudDecay\x20=\x201.0\x20-\x20smoothstep(0.0,\x201.0,\x20uLoudnessDistortion.y);\x0a\x20\x20\x20\x20float\x20loudMix\x20=\x20loudAmt\x20*\x20loudDecay;\x0a\x20\x20\x20\x20vec2\x20polar\x20=\x20toPolar2(loudCoords);\x0a\x20\x20\x20\x20float\x20swirl\x20=\x20loudMix\x20*\x200.65\x20*\x20uLoudnessDistortionDirection\x20*\x0a\x20\x20\x20\x20\x20\x20smoothstep(0.0,\x201.4,\x20clamp(polar.x,\x200.0,\x202.0));\x0a\x20\x20\x20\x20polar.y\x20+=\x20swirl;\x0a\x20\x20\x20\x20vec2\x20warped\x20=\x20toRect2(polar);\x0a\x20\x20\x20\x20float\x20rippleAmp\x20=\x20loudMix\x20*\x200.12;\x0a\x20\x20\x20\x20float\x20ripple\x20=\x20sin(uLoudnessDistortion.z\x20*\x202.4\x20+\x20polar.x\x20*\x2018.0\x20+\x20uLoudnessDistortion.w\x20*\x20TAU);\x0a\x20\x20\x20\x20float\x20safeLen\x20=\x20max(length(warped),\x201e-4);\x0a\x20\x20\x20\x20vec2\x20dirVec\x20=\x20warped\x20/\x20safeLen;\x0a\x20\x20\x20\x20warped\x20+=\x20dirVec\x20*\x20rippleAmp\x20*\x20ripple;\x0a\x20\x20\x20\x20loudCoords\x20=\x20mix(loudCoords,\x20warped,\x20clamp(loudMix\x20*\x201.2,\x200.0,\x201.0));\x0a\x20\x20\x20\x20loudRadius\x20=\x20length(loudCoords);\x0a\x20\x20}\x0a\x0a\x20\x20vec3\x20col\x20=\x20effect(loudCoords,\x20pp);\x0a\x0a\x20\x20if\x20(loudAmt\x20>\x200.0001)\x20{\x0a\x20\x20\x20\x20float\x20loudDecay\x20=\x201.0\x20-\x20smoothstep(0.0,\x201.0,\x20uLoudnessDistortion.y);\x0a\x20\x20\x20\x20float\x20halo\x20=\x20loudAmt\x20*\x20loudDecay;\x0a\x20\x20\x20\x20vec3\x20loudTint\x20=\x20mix(vec3(0.95,\x200.6,\x201.1),\x20vec3(1.0,\x200.85,\x200.45),\x20clamp(uTreble,\x200.0,\x201.0));\x0a\x20\x20\x20\x20float\x20beam\x20=\x20exp(-loudRadius\x20*\x20mix(5.0,\x2012.0,\x20halo));\x0a\x20\x20\x20\x20col\x20=\x20mix(col,\x20col\x20*\x20(1.0\x20+\x20halo\x20*\x200.4)\x20+\x20loudTint\x20*\x20halo\x20*\x200.25,\x20halo\x20*\x200.45);\x0a\x20\x20\x20\x20col\x20+=\x20loudTint\x20*\x20beam\x20*\x20halo\x20*\x200.2;\x0a\x20\x20}\x0a\x0a\x20\x20if\x20(introPhase\x20>\x200.0001)\x20{\x0a\x20\x20\x20\x20float\x20introGlow\x20=\x20introPhase\x20*\x20introPhase;\x0a\x20\x20\x20\x20vec3\x20introTint\x20=\x20mix(vec3(0.8,\x200.5,\x201.1),\x20vec3(1.0,\x200.92,\x200.7),\x20clamp(uColorDrift,\x200.0,\x201.0));\x0a\x20\x20\x20\x20col\x20=\x20mix(col,\x20col\x20*\x20(1.0\x20+\x20introGlow\x20*\x200.35)\x20+\x20introTint\x20*\x20introGlow\x20*\x200.2,\x20introGlow\x20*\x200.5);\x0a\x20\x20}\x0a\x0a\x20\x20if\x20(collapsePhase\x20>\x200.0001)\x20{\x0a\x20\x20\x20\x20float\x20collapseGlow\x20=\x20collapsePhase\x20*\x20collapsePhase;\x0a\x20\x20\x20\x20vec3\x20collapseTint\x20=\x20mix(vec3(0.05,\x200.02,\x200.2),\x20vec3(1.0,\x200.8,\x200.9),\x20collapsePhase);\x0a\x20\x20\x20\x20float\x20tunnel\x20=\x20exp(-collapseRadius\x20*\x20mix(2.8,\x204.5,\x20collapsePhase));\x0a\x20\x20\x20\x20col\x20=\x20mix(col,\x20col\x20*\x20(1.0\x20+\x20collapseGlow\x20*\x200.55),\x20collapseGlow\x20*\x200.5);\x0a\x20\x20\x20\x20col\x20+=\x20collapseTint\x20*\x20tunnel\x20*\x20(0.2\x20+\x20collapseGlow\x20*\x200.4);\x0a\x20\x20}\x0a\x0a\x20\x20gl_FragColor\x20=\x20vec4(col,\x201.0);\x0a}\x0a','uLoudnessDistortion','_loudnessDistortionMaxDuration','DRIVING','dominantFreq','disableVertexAttribArray','tempo','loudnessDb','uResolution','stereoBalance','ARRAY_BUFFER','treble','outroPhase','bpm','_program','drawingBufferHeight','useProgram','BLEND','beatPulse','uOutroCollapsePhase','stereo','uIntroCollapsePhase','647516TPLnjS','_loudnessDistortionDropTimer','_loudnessDistortionPeak','32655CpNCYK','uTreble','_introCollapsePhase','max','drawingBufferWidth','uStereo','_loudnessDistortionCooldown','drop','min','aPosition','overallEnergy','energy','_loudnessDistortionActive','mrange','onResize','_outroCollapsePhase','uBass','midSideRatio','Cathedral-scale\x20neon\x20vistas\x20that\x20bend\x20and\x20shimmer\x20with\x20the\x20music,\x20bass\x20tilts\x20the\x20horizon,\x20treble\x20paints\x20laser\x20ridges,\x20and\x20stereo\x20swirl\x20warps\x20the\x20sky\x20portal.','introPhase','uniform1f','smooth','_loudnessDistortionTravel','attackRelease','_loudnessDistortionCooldownDuration','_loudnessDistortionDirection','8238448yBLJDc','_attributes','step','rms','2505200aliSKj','bindBuffer','3706509rCGCiz','54hzDNri','beat','uPhrase','ONE','beatDrop','_loudnessDistortionDropHold','onUpdate','VIBE','bufferData','uniform4f','uDrop','_loudnessDistortionTimer','uLoudnessDistortionDirection','meta','dbTo01','15737904DyWVZB','dbNormalized','DEPTH_TEST','loudnessShortDb','height','bass','spectralFlux','_loudnessDistortionMinDrop','_time','colorDrift','presenceEnergy','drawArrays','clamp'];_0x3f2c=function(){return _0x3d3e7b;};return _0x3f2c();}import{w as _0x7273f0,T as _0x2f0807}from'./timeline-distortion-effect.min.js';const i=_0x7273f0(_0x3bb392(0x24a));class r extends _0x1e4805{static [_0x3bb392(0x20d)]={'savedAt':0x19c4f55825d,'createdBy':_0x3bb392(0x1ec),'description':_0x3bb392(0x1f1),'tags':[_0x4662ef[_0x3bb392(0x238)]['HD'],_0x4662ef[_0x3bb392(0x207)]['EPIC'],_0x4662ef[_0x3bb392(0x207)]['TRIPPY'],_0x4662ef[_0x3bb392(0x239)]['MID_HIGH'],_0x4662ef['TEMPO'][_0x3bb392(0x24d)]]};constructor(_0x2b5034){const _0x16e3a7=_0x3bb392;super(_0x2b5034),this[_0x16e3a7(0x258)]=null,this[_0x16e3a7(0x1fa)]=null,this['_uniforms']=null,this[_0x16e3a7(0x245)]=null,this[_0x16e3a7(0x224)]=null,this['_time']=0x0,this[_0x16e3a7(0x240)]=0x0,this[_0x16e3a7(0x242)]={'energy':0x0,'bass':0x0,'treble':0x0,'flux':0x0,'stereo':0x0,'drop':0x0,'colorDrift':0.5,'beat':0x0},this[_0x16e3a7(0x232)]=new _0x2f0807({'intro':{'startWindowRatio':0x0,'minStartWindow':0x9,'startReleaseWindow':0.9,'attack':0.18,'release':1.4},'outro':{'endWindowRatio':0x0,'minEndWindow':0x14,'attack':0.16,'release':2.4}}),this[_0x16e3a7(0x265)]=0x0,this[_0x16e3a7(0x1ee)]=0x0,this[_0x16e3a7(0x229)]=0x0,this[_0x16e3a7(0x1eb)]=!0x1,this['_loudnessDistortionTimer']=0x0,this[_0x16e3a7(0x261)]=0x0,this[_0x16e3a7(0x262)]=0x0,this[_0x16e3a7(0x227)]=0x0,this[_0x16e3a7(0x1f5)]=0x0,this[_0x16e3a7(0x1f8)]=0x1,this[_0x16e3a7(0x269)]=0x0,this[_0x16e3a7(0x1f7)]=0xa,this[_0x16e3a7(0x24c)]=0x8,this[_0x16e3a7(0x205)]=0x2,this[_0x16e3a7(0x216)]=0.05,this[_0x16e3a7(0x23a)]=0x0;}[_0x3bb392(0x21f)](){const _0x4e188f=_0x3bb392,_0x5527b6=this['gl'];if(!_0x5527b6)return;_0x5527b6['disable'](_0x5527b6[_0x4e188f(0x211)]),_0x5527b6['disable'](_0x5527b6['CULL_FACE']),_0x5527b6[_0x4e188f(0x221)](_0x5527b6[_0x4e188f(0x25b)]),_0x5527b6['blendFunc'](_0x5527b6[_0x4e188f(0x203)],_0x5527b6['ONE_MINUS_SRC_ALPHA']),this[_0x4e188f(0x258)]=this['createProgram'](_0x4e188f(0x249),i,{'aPosition':0x0}),this['_attributes']={'aPosition':_0x5527b6[_0x4e188f(0x243)](this[_0x4e188f(0x258)],'aPosition')},this[_0x4e188f(0x236)]={'uTime':_0x5527b6['getUniformLocation'](this[_0x4e188f(0x258)],_0x4e188f(0x223)),'uResolution':_0x5527b6['getUniformLocation'](this[_0x4e188f(0x258)],_0x4e188f(0x252)),'uEnergy':_0x5527b6[_0x4e188f(0x22c)](this['_program'],_0x4e188f(0x241)),'uBass':_0x5527b6['getUniformLocation'](this[_0x4e188f(0x258)],_0x4e188f(0x1ef)),'uTreble':_0x5527b6['getUniformLocation'](this[_0x4e188f(0x258)],_0x4e188f(0x264)),'uFlux':_0x5527b6[_0x4e188f(0x22c)](this[_0x4e188f(0x258)],_0x4e188f(0x22a)),'uStereo':_0x5527b6['getUniformLocation'](this[_0x4e188f(0x258)],_0x4e188f(0x268)),'uPhrase':_0x5527b6[_0x4e188f(0x22c)](this[_0x4e188f(0x258)],_0x4e188f(0x202)),'uDrop':_0x5527b6[_0x4e188f(0x22c)](this[_0x4e188f(0x258)],'uDrop'),'uColorDrift':_0x5527b6[_0x4e188f(0x22c)](this[_0x4e188f(0x258)],_0x4e188f(0x228)),'uBeatPulse':_0x5527b6[_0x4e188f(0x22c)](this[_0x4e188f(0x258)],'uBeatPulse'),'uIntroCollapsePhase':_0x5527b6[_0x4e188f(0x22c)](this['_program'],_0x4e188f(0x25f)),'uOutroCollapsePhase':_0x5527b6['getUniformLocation'](this[_0x4e188f(0x258)],'uOutroCollapsePhase'),'uLoudnessDistortion':_0x5527b6[_0x4e188f(0x22c)](this[_0x4e188f(0x258)],'uLoudnessDistortion'),'uLoudnessDistortionDirection':_0x5527b6[_0x4e188f(0x22c)](this['_program'],_0x4e188f(0x20c))};const _0x23ed0a=_0x5527b6[_0x4e188f(0x233)]();if(!_0x23ed0a)throw new Error(_0x4e188f(0x21c));this['autoDispose'](_0x23ed0a,(_0x2e7ecd,_0x17a942)=>_0x2e7ecd['deleteBuffer'](_0x17a942)),_0x5527b6[_0x4e188f(0x1fe)](_0x5527b6[_0x4e188f(0x254)],_0x23ed0a),_0x5527b6[_0x4e188f(0x208)](_0x5527b6[_0x4e188f(0x254)],new Float32Array([-0x1,-0x1,0x3,-0x1,-0x1,0x3]),_0x5527b6['STATIC_DRAW']),_0x5527b6[_0x4e188f(0x1fe)](_0x5527b6['ARRAY_BUFFER'],null),this[_0x4e188f(0x245)]=_0x23ed0a,this['_time']=0x0,this['_lastRenderAt']=null,this[_0x4e188f(0x240)]=0x0,this[_0x4e188f(0x242)]={'energy':0x0,'bass':0x0,'treble':0x0,'flux':0x0,'stereo':0x0,'drop':0x0,'colorDrift':0.5,'beat':0x0},this[_0x4e188f(0x232)]?.[_0x4e188f(0x230)](),this[_0x4e188f(0x265)]=0x0,this[_0x4e188f(0x1ee)]=0x0,this[_0x4e188f(0x229)]=0x0,this[_0x4e188f(0x1eb)]=!0x1,this['_loudnessDistortionTimer']=0x0,this[_0x4e188f(0x261)]=0x0,this[_0x4e188f(0x262)]=0x0,this['_loudnessDistortionPhase']=0x0,this[_0x4e188f(0x1f5)]=0x0,this[_0x4e188f(0x1f8)]=0x1,this[_0x4e188f(0x269)]=0x0,this[_0x4e188f(0x23a)]=0x0,this['_updateResolutionUniform']();}[_0x3bb392(0x1ed)](){const _0x40271c=_0x3bb392;super[_0x40271c(0x1ed)]?.(),this[_0x40271c(0x220)]();}[_0x3bb392(0x206)](_0x332080){const _0x152aa5=_0x3bb392;if(!_0x332080||!this['_state'])return;const _0x3aebc6=this[_0x152aa5(0x21b)](_0x332080['dt']??0x1/0x3c,0x1/0xf0,0.25),_0xed5fcd=this[_0x152aa5(0x21b)](_0x332080['energy']??_0x332080[_0x152aa5(0x1e9)]??_0x332080[_0x152aa5(0x1fc)]??this[_0x152aa5(0x20e)](_0x332080[_0x152aa5(0x212)]??_0x332080[_0x152aa5(0x251)]??-0x34,-0x3c,-0x6),0x0,1.5),_0x2c6d6f=this['clamp'](_0x332080[_0x152aa5(0x210)]??_0x332080['rms']??_0x332080[_0x152aa5(0x1ea)]??_0xed5fcd,0x0,1.5),_0x39654a=this['clamp'](Math['max'](_0x332080[_0x152aa5(0x22e)]??0x0,_0x332080['bassEnergy']??0x0,_0x332080[_0x152aa5(0x22b)]??0x0),0x0,1.4),_0x2fdf13=this[_0x152aa5(0x21b)](Math[_0x152aa5(0x266)](_0x332080[_0x152aa5(0x23e)]??0x0,_0x332080[_0x152aa5(0x244)]??0x0,_0x332080[_0x152aa5(0x219)]??0x0),0x0,1.4),_0x518dd7=this[_0x152aa5(0x21b)](_0x332080[_0x152aa5(0x215)]??0x0,0x0,0x3),_0x42dfda=this[_0x152aa5(0x21b)](_0x332080[_0x152aa5(0x253)]??_0x332080[_0x152aa5(0x1f0)]??0x0,-0x1,0x1),_0x11f38f=this[_0x152aa5(0x21b)](_0x332080['dropIntensity']??_0x332080[_0x152aa5(0x204)]??0x0,0x0,0x2),_0x2b0ff2=this[_0x152aa5(0x21b)]((_0x332080[_0x152aa5(0x234)]??_0x332080[_0x152aa5(0x24e)]??0x7d0)/0x2ee0,0x0,0x1),_0xe82e06=this[_0x152aa5(0x21b)](_0x332080[_0x152aa5(0x25c)]??(_0x332080[_0x152aa5(0x222)]?0x1:0x0)??(_0x332080[_0x152aa5(0x21d)]?0x1:0x0),0x0,1.5),_0x759c60=this['clamp'](_0x332080[_0x152aa5(0x257)]??_0x332080[_0x152aa5(0x250)]??0x78,0x28,0xc8)/0x3c/0x8;this[_0x152aa5(0x240)]=(this[_0x152aa5(0x240)]+_0x3aebc6*_0x759c60)%0x1;const _0x4dc510=this[_0x152aa5(0x1f6)](this[_0x152aa5(0x242)]['energy']??_0xed5fcd,_0xed5fcd,_0x3aebc6,0.05,0.32),_0x270d03=this[_0x152aa5(0x1f6)](this['_state']['bass']??_0x39654a,_0x39654a,_0x3aebc6,0.08,0.4),_0x2b2588=this[_0x152aa5(0x1f6)](this[_0x152aa5(0x242)]['treble']??_0x2fdf13,_0x2fdf13,_0x3aebc6,0.08,0.35),_0x1b2878=this[_0x152aa5(0x1f6)](this[_0x152aa5(0x242)][_0x152aa5(0x226)]??_0x518dd7,_0x518dd7,_0x3aebc6,0.12,0.5),_0x37189e=this['attackRelease'](this[_0x152aa5(0x242)]['stereo']??_0x42dfda,_0x42dfda,_0x3aebc6,0.12,0.45),_0x31b3ae=this[_0x152aa5(0x1f6)](this[_0x152aa5(0x242)][_0x152aa5(0x26a)]??_0x11f38f,_0x11f38f,_0x3aebc6,0.04,0.4),_0x2996c4=this[_0x152aa5(0x1f4)](this[_0x152aa5(0x242)][_0x152aa5(0x218)]??_0x2b0ff2,_0x2b0ff2,0.18),_0x571767=this['attackRelease'](this['_state'][_0x152aa5(0x201)]??_0xe82e06,_0xe82e06,_0x3aebc6,0.02,0.35);this[_0x152aa5(0x242)][_0x152aa5(0x1ea)]=_0x4dc510,this[_0x152aa5(0x242)][_0x152aa5(0x214)]=_0x270d03,this[_0x152aa5(0x242)][_0x152aa5(0x255)]=_0x2b2588,this[_0x152aa5(0x242)][_0x152aa5(0x226)]=_0x1b2878,this[_0x152aa5(0x242)][_0x152aa5(0x25e)]=_0x37189e,this['_state']['drop']=_0x31b3ae,this[_0x152aa5(0x242)]['colorDrift']=_0x2996c4,this[_0x152aa5(0x242)][_0x152aa5(0x201)]=_0x571767,this['_loudnessDistortionCooldown']=Math[_0x152aa5(0x266)](0x0,this['_loudnessDistortionCooldown']-_0x3aebc6);const _0x55d528=_0x2c6d6f-(this[_0x152aa5(0x23a)]??_0x2c6d6f);if(!this[_0x152aa5(0x1eb)]&&this['_loudnessDistortionCooldown']<=0x0&&_0x55d528>=0.15&&(this[_0x152aa5(0x1eb)]=!0x0,this['_loudnessDistortionTimer']=0x0,this[_0x152aa5(0x261)]=0x0,this[_0x152aa5(0x262)]=_0x2c6d6f,this[_0x152aa5(0x1f8)]=0x1,this[_0x152aa5(0x1f5)]=0x0,this[_0x152aa5(0x269)]=this[_0x152aa5(0x1f7)]),this['_loudnessDistortionActive'])this[_0x152aa5(0x20b)]+=_0x3aebc6,this[_0x152aa5(0x262)]=Math[_0x152aa5(0x266)](this[_0x152aa5(0x262)],_0x2c6d6f),(this['_loudnessDistortionPeak']-_0x2c6d6f>=this[_0x152aa5(0x216)]?(this['_loudnessDistortionDropTimer']+=_0x3aebc6,this[_0x152aa5(0x261)]>=this['_loudnessDistortionDropHold']&&(this[_0x152aa5(0x1eb)]=!0x1)):this[_0x152aa5(0x261)]=0x0,this[_0x152aa5(0x20b)]>=this[_0x152aa5(0x24c)]&&(this[_0x152aa5(0x1eb)]=!0x1));else this['_loudnessDistortion']<=0.001&&(this[_0x152aa5(0x20b)]=0x0,this[_0x152aa5(0x261)]=0x0,this[_0x152aa5(0x262)]=_0x2c6d6f);const _0xca113e=this['_loudnessDistortionActive']?0x1:0x0;if(this[_0x152aa5(0x229)]=this['attackRelease'](this[_0x152aa5(0x229)],_0xca113e,_0x3aebc6,0.12,0.85),this[_0x152aa5(0x227)]+=_0x3aebc6*(0.35+0.5*_0x4dc510),this[_0x152aa5(0x227)]>0x3e8&&(this[_0x152aa5(0x227)]-=0x3e8),this[_0x152aa5(0x1eb)]||this[_0x152aa5(0x229)]>0.001){const _0x438a0b=_0x3aebc6*(0.1+0.05*_0x4dc510);this[_0x152aa5(0x1f5)]=(this[_0x152aa5(0x1f5)]+_0x438a0b)%0x1;}else this[_0x152aa5(0x1f5)]=this['lerp'](this[_0x152aa5(0x1f5)],0x0,0.02);if(this[_0x152aa5(0x23a)]=_0x2c6d6f,this[_0x152aa5(0x232)]){this['_timelineDistortion']['update'](_0x332080);const _0x4b971b=this[_0x152aa5(0x232)][_0x152aa5(0x1fb)](_0x3aebc6);this[_0x152aa5(0x265)]=_0x4b971b?.[_0x152aa5(0x1f2)]??0x0,this['_outroCollapsePhase']=_0x4b971b?.[_0x152aa5(0x256)]??0x0;}}[_0x3bb392(0x23d)](_0x39e48a){const _0x3a0b1c=_0x3bb392;if(!(_0x39e48a&&this[_0x3a0b1c(0x258)]&&this[_0x3a0b1c(0x245)]&&this[_0x3a0b1c(0x242)]))return;const _0x3b6bc7=_0x3a0b1c(0x225)!=typeof performance?0.001*performance[_0x3a0b1c(0x23c)]():Date['now']()/0x3e8;null==this['_lastRenderAt']&&(this[_0x3a0b1c(0x224)]=_0x3b6bc7);const _0x2446d6=Math[_0x3a0b1c(0x1e7)](_0x3b6bc7-this[_0x3a0b1c(0x224)],0.12);_0x2446d6>0x0&&(this['_time']+=_0x2446d6*this[_0x3a0b1c(0x21e)](this['_state'][_0x3a0b1c(0x1ea)]??0.7,0x0,1.4,0.6,1.35),this[_0x3a0b1c(0x224)]=_0x3b6bc7);const _0x31d572=_0x39e48a[_0x3a0b1c(0x267)]||this[_0x3a0b1c(0x22d)]?.['width']||0x1,_0x187c0c=_0x39e48a[_0x3a0b1c(0x259)]||this[_0x3a0b1c(0x22d)]?.[_0x3a0b1c(0x213)]||0x1;_0x39e48a[_0x3a0b1c(0x231)](0x0,0x0,_0x31d572,_0x187c0c),_0x39e48a[_0x3a0b1c(0x25a)](this[_0x3a0b1c(0x258)]),_0x39e48a[_0x3a0b1c(0x1fe)](_0x39e48a[_0x3a0b1c(0x254)],this[_0x3a0b1c(0x245)]);const _0x3356e5=this[_0x3a0b1c(0x1fa)][_0x3a0b1c(0x1e8)];if(_0x39e48a[_0x3a0b1c(0x23f)](_0x3356e5),_0x39e48a[_0x3a0b1c(0x237)](_0x3356e5,0x2,_0x39e48a[_0x3a0b1c(0x23b)],!0x1,0x0,0x0),_0x39e48a[_0x3a0b1c(0x1f3)](this[_0x3a0b1c(0x236)]['uTime'],this[_0x3a0b1c(0x217)]),_0x39e48a[_0x3a0b1c(0x235)](this[_0x3a0b1c(0x236)][_0x3a0b1c(0x252)],_0x31d572,_0x187c0c),_0x39e48a[_0x3a0b1c(0x1f3)](this[_0x3a0b1c(0x236)]['uEnergy'],this[_0x3a0b1c(0x242)]['energy']??0x0),_0x39e48a[_0x3a0b1c(0x1f3)](this[_0x3a0b1c(0x236)]['uBass'],this[_0x3a0b1c(0x242)][_0x3a0b1c(0x214)]??0x0),_0x39e48a[_0x3a0b1c(0x1f3)](this[_0x3a0b1c(0x236)]['uTreble'],this[_0x3a0b1c(0x242)][_0x3a0b1c(0x255)]??0x0),_0x39e48a['uniform1f'](this['_uniforms'][_0x3a0b1c(0x22a)],this[_0x3a0b1c(0x242)]['flux']??0x0),_0x39e48a['uniform1f'](this[_0x3a0b1c(0x236)]['uStereo'],this[_0x3a0b1c(0x242)][_0x3a0b1c(0x25e)]??0x0),_0x39e48a[_0x3a0b1c(0x1f3)](this[_0x3a0b1c(0x236)]['uPhrase'],this['_phraseClock']),_0x39e48a[_0x3a0b1c(0x1f3)](this['_uniforms'][_0x3a0b1c(0x20a)],this['_state'][_0x3a0b1c(0x26a)]??0x0),_0x39e48a[_0x3a0b1c(0x1f3)](this[_0x3a0b1c(0x236)][_0x3a0b1c(0x228)],this[_0x3a0b1c(0x242)][_0x3a0b1c(0x218)]??0.5),_0x39e48a[_0x3a0b1c(0x1f3)](this[_0x3a0b1c(0x236)][_0x3a0b1c(0x247)],this[_0x3a0b1c(0x242)][_0x3a0b1c(0x201)]??0x0),this['_uniforms'][_0x3a0b1c(0x25f)]&&_0x39e48a[_0x3a0b1c(0x1f3)](this[_0x3a0b1c(0x236)][_0x3a0b1c(0x25f)],this[_0x3a0b1c(0x265)]??0x0),this[_0x3a0b1c(0x236)][_0x3a0b1c(0x25d)]&&_0x39e48a[_0x3a0b1c(0x1f3)](this['_uniforms'][_0x3a0b1c(0x25d)],this[_0x3a0b1c(0x1ee)]??0x0),this['_uniforms']['uLoudnessDistortion']){const _0x52d4fe=this[_0x3a0b1c(0x24c)]>0x0?this[_0x3a0b1c(0x21b)](this[_0x3a0b1c(0x20b)]/this[_0x3a0b1c(0x24c)],0x0,0x1):0x0;_0x39e48a[_0x3a0b1c(0x209)](this['_uniforms'][_0x3a0b1c(0x24b)],this[_0x3a0b1c(0x229)],_0x52d4fe,this['_loudnessDistortionPhase'],this[_0x3a0b1c(0x1f5)]);}this[_0x3a0b1c(0x236)]['uLoudnessDistortionDirection']&&_0x39e48a[_0x3a0b1c(0x1f3)](this[_0x3a0b1c(0x236)][_0x3a0b1c(0x20c)],this[_0x3a0b1c(0x1f8)]),_0x39e48a[_0x3a0b1c(0x21a)](_0x39e48a['TRIANGLES'],0x0,0x3),_0x39e48a[_0x3a0b1c(0x24f)](_0x3356e5),_0x39e48a[_0x3a0b1c(0x1fe)](_0x39e48a[_0x3a0b1c(0x254)],null),_0x39e48a[_0x3a0b1c(0x25a)](null);}[_0x3bb392(0x220)](){const _0x2d4594=_0x3bb392,_0x4e6dac=this['gl'];if(!_0x4e6dac||!this[_0x2d4594(0x258)]||!this[_0x2d4594(0x236)]?.[_0x2d4594(0x252)])return;_0x4e6dac['useProgram'](this[_0x2d4594(0x258)]);const _0x1299bf=_0x4e6dac[_0x2d4594(0x267)]||this['canvas']?.[_0x2d4594(0x248)]||0x1,_0x16540f=_0x4e6dac[_0x2d4594(0x259)]||this['canvas']?.[_0x2d4594(0x213)]||0x1;_0x4e6dac['uniform2f'](this[_0x2d4594(0x236)]['uResolution'],_0x1299bf,_0x16540f),_0x4e6dac['useProgram'](null);}}_0x28c98e('kali-neon-horizon',r,{'meta':r[_0x3bb392(0x20d)]});
